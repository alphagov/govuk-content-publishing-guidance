{% extends "layouts/main.njk" %}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set successNotificationBannerHtml %}
  <p class="govuk-notification-banner__heading">You’ve set your cookie preferences.</p>
{% endset %}

{% block content %}
  {{ super() }}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="app-cookies-page" data-module="app-cookies-page">

        {{ govukNotificationBanner({
          type: "success",
          html: successNotificationBannerHtml,
          classes: "js-cookies-page-success",
          attributes: {
            hidden: ""
          }
        }) }}

        {% block cookiesBody %}{% endblock %}

        <form class="js-cookies-page-form">

          <h2 class="govuk-heading-l govuk-!-margin-top-6">Essential cookies (strictly necessary)</h2>

          <p class="govuk-body">We use an essential cookie to remember when you accept or reject cookies on our website.</p>

          {{ govukTable({
            firstCellIsHeader: true,
            caption: "Essential cookies we use",
            head: [
              { text: "Name" },
              { text: "Purpose"},
              { text: "Expires"}
            ],
            rows: [
              [
                {text: "design_system_cookies_policy"},
                {text: "Saves your cookie consent settings"},
                {text: "1 year"}
              ]
            ]
          }) }}

          {% block analyticsBody %}{% endblock %}

          {{ govukTable({
            firstCellIsHeader: true,
            caption: "Analytics cookies we use",
            head: [
              { text: "Name" },
              { text: "Purpose" },
              { text: "Expires" }
            ],
            rows: [
              [
                { text: "_ga" },
                { text: "Helps us count how many people visit the GOV.UK Design System by telling us if you’ve visited before." },
                { text: "2 years" }
              ],
              [
                { text: "ga_[random number]" },
                { text: "Used to reduce the number of requests." },
                { text: "2 years" }
              ]
            ]
          }) }}

          {{ govukRadios({
            name: "cookies[analytics]",
            idPrefix: "cookies-analytics",
            fieldset: {
              legend: {
                text: "Do you want to accept analytics cookies?",
                classes: "govuk-fieldset__legend--s"
              },
              classes: "js-cookies-page-form-fieldset",
              attributes: {
                "data-cookie-type": "analytics",
                hidden: ""
              }
            },
            items: [
              {
                text: "Yes",
                value: "yes"
              },
              {
                text: "No",
                value: "no"
              }
            ]
          }) }}

          {{ govukButton({
            text: "Save cookie settings",
            classes: "js-cookies-form-button",
            attributes: {
              hidden: ""
            }
          }) }}
        </form>      
      </div>
    </div>
  </div>
{% endblock %}